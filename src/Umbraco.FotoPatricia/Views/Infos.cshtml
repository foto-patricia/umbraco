@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<ContentModels.Infos>
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;

@using System.Linq;
@using System.Collections.Generic;
@using Umbraco.Cms.Core.Models;
@using Umbraco.Cms.Core.Models.Blocks;
@using Umbraco.Cms.Core.Models.PublishedContent;
@using Umbraco.Extensions;
@using Newtonsoft.Json;

@{
	Layout = "Layout.cshtml";
	var heroImage = Model.Value<MediaWithCrops>("heroImage");
	
	var fragenUndAntworten = Model
        .Value<IEnumerable<BlockListItem>>("fragenUndAntworten")
        .Select(bli => (ContentModels.FrageUndAntwort)bli.Content)
        .ToList();
}


<!-- Hero section -->
<div id="hero" class="relative">
    <div class="hero-image-wrapper w-full h-64 lg:h-96 xl:h-128">
        <div class="md:hidden hero-image bg-fixed bg-contain w-full h-64" 
            style="background-image:url(@heroImage.GetCropUrl(cropAlias: "square", useCropDimensions: true, urlMode: UrlMode.Default, furtherOptions:"&format=WebP"))">
        </div>
        
        <div class="hidden md:block hero-image bg-fixed bg-contain w-full h-64 lg:h-96 xl:h-128" 
            style="background-image:url(@heroImage.GetCropUrl(cropAlias: "hero", useCropDimensions: true, urlMode: UrlMode.Default, furtherOptions:"&format=WebP"))">
        </div>
    </div>

    <div class="absolute inset-0">
        <div class="flex items-center justify-center h-full">
            <div class="backdrop-filter backdrop-blur-md bg-opacity-25 bg-white rounded-full">
                <h1 class="text-white opacity-80 drop-shadow-lg text-4xl md:text-6xl font-bold my-4 mx-8">@Model.Value("title")</h1>
            </div>
        </div>
    </div>
</div>

<div class="bg-white px-6 py-32 lg:px-8">
  <div class="mx-auto max-w-3xl">
      
    @for(var i=0; i<fragenUndAntworten.Count; i++)
    {
        var faq = fragenUndAntworten[i];
        var target = $"#flush-collapse{i}";
        var controls = $"flush-collapse{i}";
        var labelledby = $"flush-heading{i}";
        
        <div class="rounded-none border border-l-0 border-r-0 border-t-0 border-neutral-200 bg-white dark:border-neutral-600 dark:bg-neutral-800">
        <h2 class="mb-0" id="@labelledby">
          <button
            class="group relative flex w-full items-center rounded-none border-0 bg-white px-5 py-4 text-left text-base text-neutral-800 transition [overflow-anchor:none] hover:z-[2] focus:z-[3] focus:outline-none dark:bg-neutral-800 dark:text-white [&:not([data-te-collapse-collapsed])]:bg-white [&:not([data-te-collapse-collapsed])]:text-primary [&:not([data-te-collapse-collapsed])]:[box-shadow:inset_0_-1px_0_rgba(229,231,235)] dark:[&:not([data-te-collapse-collapsed])]:bg-neutral-800 dark:[&:not([data-te-collapse-collapsed])]:text-primary-400 dark:[&:not([data-te-collapse-collapsed])]:[box-shadow:inset_0_-1px_0_rgba(75,85,99)]"
            type="button"
            data-te-collapse-init
            data-te-collapse-collapsed
            data-te-target="@target"
            aria-expanded="false"
            aria-controls="@controls">
            @faq.Frage
            <span
              class="-mr-1 ml-auto h-5 w-5 shrink-0 rotate-[-180deg] fill-[#336dec] transition-transform duration-200 ease-in-out group-[[data-te-collapse-collapsed]]:mr-0 group-[[data-te-collapse-collapsed]]:rotate-0 group-[[data-te-collapse-collapsed]]:fill-[#212529] motion-reduce:transition-none dark:fill-blue-300 dark:group-[[data-te-collapse-collapsed]]:fill-white">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="h-6 w-6">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
              </svg>
            </span>
          </button>
        </h2>
        <div
          id="@controls"
          class="!visible hidden"
          data-te-collapse-item
          aria-labelledby="@labelledby"
          data-te-parent="#accordionFlushExample">
          <div class="px-5 py-4">
            @faq.Antwort
          </div>
        </div>
      </div>
    }
  
  </div>
</div>
